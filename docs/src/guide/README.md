# Overview

::: danger

Note: This site is work-in-progress and the mainnet library is currently in a prototype stage. 
Things may and will change randomly. There is no backward compatibility guarantee yet, 
even though we try not to break things too often. Use at your own risk. To see the old site with the full plan 
(yet to be implemented), go [here](https://web.archive.org/web/20200810182937/https://mainnet.cash/).

:::

<!-- Your stack: Browser + IndexedDB PHP Other -->

## Let's get programming Bitcoin Cash!

Note that this tutorial describes `Browser + IndexedDB` approach, which means that the wallets will be created 
and persisted inside of a user browser.

To get started using Bitcoin Cash on your site, include this tag in your section:

```html
<script src="https://mainnet.cash/dist/mainnet-0.0.1-rc.js"></script>
```

Now, you can create a test wallet:

```js
const wallet = await TestNetWallet.newRandom();
const wallet = await TestNetWallet.named('buyer'); // named wallet
```

`buyer` is an optional name for the wallet, it saves data in user's browser for future re-use. See further for explanation.

`TestNet` is where you test your application. TestNet money has no price. Opposite of TestNet is `MainNet`, 
which is what people usually mean when they talk about Bitcoin Cash network. 
You might also hear about RegTest mode, which is when you run your Bitcoin Cash node 
locally and you can get as many test coins as you need, but they exist on your machine only. 
RegTest wallets are supported by mainnet library.

To create a MainNet wallet (Bitcoin Cash production network) or a RegTest (local development) wallets, use this:

```js
const wallet = await Wallet.newRandom(); // MainNet
const wallet = await RegTestWallet.newRandom();
```

::: tip Why named wallets?

For in-browser wallet they are used to saved the private key generated by the browser, so that you 
can run ```await Wallet.named(`user`)``` and always get the same wallet back,
but it's better to run ```await Wallet.named(`user:${id}`)``` and add the `ID` of the user, 
so that if the same browser multiple users use the same browser, they'll all get their own wallet.

:::

Running `await Wallet.newRandom()` will create a new wallet each time it is called, 
which is not useful for your user, since they'll lose their private keys.

For server-side languages named wallets are stored on the REST server (your own), so that you 
can run something similar to await Wallet.named(`hot-wallet`) and get the same hot wallet every time 
without the need to store the private key somewhere else.

If you want to create a wallet from WIF (private key), use this call:

``` js
const wallet = Wallet.fromWIF('.....');
```

::: tip TestNet money
We will need some test money to move around, you can get some at [https://faucet.fullstack.cash/](https://faucet.fullstack.cash/)

Note: If you need a wallet that supports the TestNet, download [Electron Cash](https://electroncash.org/) and 
run it using `electron-cash --testnet` flag. For example, on MacOS that would be:

`/Applications/Electron-Cash.app/Contents/MacOS/Electron-Cash --testnet`
:::

## Sending money

Let's create another wallet and send some of our money there:

```js
const seller = new TestNetHdWallet('seller');

await wallet.send([
    [seller.depositAddress(), 0.01, 'USD'],
]);
```

Note that you can send to many addresses at once.

Let's print the balance of the seller's wallet:

```js
console.log(await seller.getBalance('USD'));
// 0.01
```

Great! You've just made your first transaction!

## Waiting for a transaction

Let's say you want to display a QR code for you user to pay you money and show an alert when money arrives?

Currently, the only way to wait for a tx is to poll the balance (this will improve later):

```js
function sleep(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

while((await wallet.getBalance('usd')) < 1.0) {
  await sleep(0.1);
}

alert('Transaction has arrived!');
````

## QR codes

To document...

## Escrow contracts

To document...

## CashScript

To document...

## Docker server

To document...

```sh
docker run mainnet/mainnet-rest
```

[Here](https://hub.docker.com/r/mainnet/mainnet-rest/)

## Packages

- NPM package `mainnet-js`
- Python PyPI package `mainnet`
- PHP Composer package `mainnet/mainnet`
- Go [package](https://github.com/mainnet-cash/mainnet-go-generated) `https://github.com/mainnet-cash/mainnet-go-generated`

### Other programming languages

We're using OpenAPI generators, so it allows you to build clients for dozens of programming languages or you can use the REST API directly.

You can see the docs for the REST API [here](https://rest-unstable.mainnet.cash/api-docs/)

We are automatically generating some clients, namely:

- [PHP](https://github.com/mainnet-cash/mainnet-php-generated)
- [Python](https://github.com/mainnet-cash/mainnet-python-generated)
- [Go](https://github.com/mainnet-cash/mainnet-go-generated)

...and we'll be adding to this list soon.

To build the client for another language, run the following commands:

```sh
git clone https://github.com/mainnet-cash/mainnet-js.git
npm run api:build:client lang
```

Where `lang` is the language you want to build, see [here](https://openapi-generator.tech/docs/generators/) for the list

## REST server docs

These are done, but we need to document it.

[Docs](https://rest-unstable.mainnet.cash/api-docs/)

---

To be continued...
